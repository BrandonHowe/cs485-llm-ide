<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 4345.84px; background-color: transparent;" viewBox="0 0 4345.84375 731" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:24px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:24px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster" id="Cloud" data-look="classic"><rect style="" x="2398.28125" y="8" width="390.921875" height="213"/><g class="cluster-label" transform="translate(2493.7421875, 8)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>LLM Provider (Cloud)</p></span></div></foreignObject></g></g><g class="cluster" id="Local" data-look="classic"><rect style="" x="3606.390625" y="362.784423828125" width="731.453125" height="324.3688659667969"/><g class="cluster-label" transform="translate(3865.4609375, 362.784423828125)"><foreignObject width="213.3125" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Local Persistence (Workspace/Profile Storage)</p></span></div></foreignObject></g></g><g class="cluster" id="Server" data-look="classic"><rect style="" x="1682.84375" y="8" width="310" height="227"/><g class="cluster-label" transform="translate(1737.84375, 8)"><foreignObject width="200" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Extension Host / Remote Agent (Server Process)</p></span></div></foreignObject></g></g><g class="cluster" id="Client" data-look="classic"><rect style="" x="8" y="255" width="3405.3125" height="468"/><g class="cluster-label" transform="translate(1610.65625, 255)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Workbench Renderer (Client)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M201.406,392.521L222.24,386.101C243.073,379.681,284.74,366.84,325.74,360.42C366.74,354,407.073,354,427.24,354L447.406,354" id="L_Dev_HistRail_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Dev_HistRail_0" data-points="W3sieCI6MjAxLjQwNjI1LCJ5IjozOTIuNTIwODUzNDQ1ODk2Nn0seyJ4IjozMjYuNDA2MjUsInkiOjM1NH0seyJ4Ijo0NTEuNDA2MjUsInkiOjM1NH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M201.406,432.368L222.24,435.807C243.073,439.245,284.74,446.123,348.073,449.561C411.406,453,496.406,453,581.622,453C666.839,453,752.271,453,855.107,453C957.943,453,1078.182,453,1198.206,453C1318.229,453,1438.036,453,1518.773,453C1599.51,453,1641.177,453,1667.568,455.402C1693.958,457.804,1705.073,462.609,1710.63,465.011L1716.187,467.413" id="L_Dev_Composer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Dev_Composer_0" data-points="W3sieCI6MjAxLjQwNjI1LCJ5Ijo0MzIuMzY3ODE3MzcxNTA3MTZ9LHsieCI6MzI2LjQwNjI1LCJ5Ijo0NTN9LHsieCI6NTgxLjQwNjI1LCJ5Ijo0NTN9LHsieCI6ODM3LjcwMzEyNSwieSI6NDUzfSx7IngiOjExOTguNDIxODc1LCJ5Ijo0NTN9LHsieCI6MTU1Ny44NDM3NSwieSI6NDUzfSx7IngiOjE2ODIuODQzNzUsInkiOjQ1M30seyJ4IjoxNzE5Ljg1ODY3NTM3MzEzNDIsInkiOjQ2OX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1068.422,364.091L1029.969,367.076C991.516,370.061,914.609,376.03,855.769,376.788C796.93,377.546,756.156,373.091,735.769,370.864L715.383,368.637" id="L_ChatUI_HistRail_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatUI_HistRail_0" data-points="W3sieCI6MTA2OC40MjE4NzUsInkiOjM2NC4wOTA5NjQyMjA3Mzk4Nn0seyJ4Ijo4MzcuNzAzMTI1LCJ5IjozODJ9LHsieCI6NzExLjQwNjI1LCJ5IjozNjguMjAyMjgwMDcwNzE4NzZ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1328.422,402.105L1366.659,416.254C1404.896,430.403,1481.37,458.702,1540.44,472.851C1599.51,487,1641.177,487,1665.525,487.748C1689.873,488.497,1696.902,489.993,1700.417,490.741L1703.931,491.49" id="L_ChatUI_Composer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatUI_Composer_0" data-points="W3sieCI6MTMyOC40MjE4NzUsInkiOjQwMi4xMDUwMjk3Nzg3MjQ1NH0seyJ4IjoxNTU3Ljg0Mzc1LCJ5Ijo0ODd9LHsieCI6MTY4Mi44NDM3NSwieSI6NDg3fSx7IngiOjE3MDcuODQzNzUsInkiOjQ5Mi4zMjI1ODA2NDUxNjEzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1328.422,354L1366.659,354C1404.896,354,1481.37,354,1540.44,354C1599.51,354,1641.177,354,1679.651,328.051C1718.125,302.103,1753.406,250.205,1771.046,224.257L1788.687,198.308" id="L_ChatUI_ChatSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatUI_ChatSvc_0" data-points="W3sieCI6MTMyOC40MjE4NzUsInkiOjM1NH0seyJ4IjoxNTU3Ljg0Mzc1LCJ5IjozNTR9LHsieCI6MTY4Mi44NDM3NSwieSI6MzU0fSx7IngiOjE3OTAuOTM1ODU1MjYzMTU4LCJ5IjoxOTV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1967.844,87.419L1972.01,86.183C1976.177,84.946,1984.51,82.473,2022.464,81.237C2060.417,80,2127.99,80,2195.563,80C2263.135,80,2330.708,80,2374.75,81.941C2418.791,83.883,2439.302,87.765,2449.557,89.706L2459.812,91.648" id="L_ChatSvc_LLM_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatSvc_LLM_0" data-points="W3sieCI6MTk2Ny44NDM3NSwieSI6ODcuNDE5MzU0ODM4NzA5Njh9LHsieCI6MTk5Mi44NDM3NSwieSI6ODB9LHsieCI6MjE5NS41NjI1LCJ5Ijo4MH0seyJ4IjoyMzk4LjI4MTI1LCJ5Ijo4MH0seyJ4IjoyNDYzLjc0MjE4NzUsInkiOjkyLjM5MTUwMjQ1ODEzMTgyfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2463.742,141.608L2452.832,143.674C2441.922,145.739,2420.102,149.869,2375.405,151.935C2330.708,154,2263.135,154,2195.563,154C2127.99,154,2060.417,154,2023.12,153.366C1985.823,152.732,1978.801,151.463,1975.291,150.829L1971.78,150.195" id="L_LLM_ChatSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_LLM_ChatSvc_0" data-points="W3sieCI6MjQ2My43NDIxODc1LCJ5IjoxNDEuNjA4NDk3NTQxODY4Mn0seyJ4IjoyMzk4LjI4MTI1LCJ5IjoxNTR9LHsieCI6MjE5NS41NjI1LCJ5IjoxNTR9LHsieCI6MTk5Mi44NDM3NSwieSI6MTU0fSx7IngiOjE5NjcuODQzNzUsInkiOjE0OS40ODM4NzA5Njc3NDE5NX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1967.844,166.258L1972.01,167.548C1976.177,168.839,1984.51,171.419,2022.464,197.543C2060.417,223.667,2127.99,273.333,2195.563,298.167C2263.135,323,2330.708,323,2367.995,323C2405.281,323,2412.281,323,2415.781,323L2419.281,323" id="L_ChatSvc_Bridge_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatSvc_Bridge_0" data-points="W3sieCI6MTk2Ny44NDM3NSwieSI6MTY2LjI1ODA2NDUxNjEyOTAyfSx7IngiOjE5OTIuODQzNzUsInkiOjE3NH0seyJ4IjoyMTk1LjU2MjUsInkiOjMyM30seyJ4IjoyMzk4LjI4MTI1LCJ5IjozMjN9LHsieCI6MjQyMy4yODEyNSwieSI6MzIzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2764.203,323L2768.37,323C2772.536,323,2780.87,323,2805.87,323C2830.87,323,2872.536,323,2934.545,350.629C2996.554,378.257,3078.905,433.514,3120.08,461.143L3161.256,488.771" id="L_Bridge_HistSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Bridge_HistSvc_0" data-points="W3sieCI6Mjc2NC4yMDMxMjUsInkiOjMyM30seyJ4IjoyNzg5LjIwMzEyNSwieSI6MzIzfSx7IngiOjI5MTQuMjAzMTI1LCJ5IjozMjN9LHsieCI6MzE2NC41NzcxOTIxNjQxNzksInkiOjQ5MX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M3141.602,557L3103.702,574.333C3065.803,591.667,2990.003,626.333,2931.27,643.667C2872.536,661,2830.87,661,2777.46,661C2724.049,661,2658.896,661,2593.742,661C2528.589,661,2463.435,661,2397.072,661C2330.708,661,2263.135,661,2195.563,661C2127.99,661,2060.417,661,2000.797,661C1941.177,661,1889.51,661,1837.844,661C1786.177,661,1734.51,661,1687.844,661C1641.177,661,1599.51,661,1518.773,661C1438.036,661,1318.229,661,1198.206,661C1078.182,661,957.943,661,862.63,618.845C767.318,576.69,696.932,492.38,661.739,450.226L626.547,408.071" id="L_HistSvc_HistRail_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_HistSvc_HistRail_0" data-points="W3sieCI6MzE0MS42MDIzMDM4MzIxMTcsInkiOjU1N30seyJ4IjoyOTE0LjIwMzEyNSwieSI6NjYxfSx7IngiOjI3ODkuMjAzMTI1LCJ5Ijo2NjF9LHsieCI6MjU5My43NDIxODc1LCJ5Ijo2NjF9LHsieCI6MjM5OC4yODEyNSwieSI6NjYxfSx7IngiOjIxOTUuNTYyNSwieSI6NjYxfSx7IngiOjE5OTIuODQzNzUsInkiOjY2MX0seyJ4IjoxODM3Ljg0Mzc1LCJ5Ijo2NjF9LHsieCI6MTY4Mi44NDM3NSwieSI6NjYxfSx7IngiOjE1NTcuODQzNzUsInkiOjY2MX0seyJ4IjoxMTk4LjQyMTg3NSwieSI6NjYxfSx7IngiOjgzNy43MDMxMjUsInkiOjY2MX0seyJ4Ijo2MjMuOTgzMjU1MjkzMTU5NiwieSI6NDA1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M3388.313,524L3392.479,524C3396.646,524,3404.979,524,3425.236,524C3445.492,524,3477.672,524,3509.852,524C3542.031,524,3574.211,524,3593.801,524C3613.391,524,3620.391,524,3623.891,524L3627.391,524" id="L_HistSvc_Store_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_HistSvc_Store_0" data-points="W3sieCI6MzM4OC4zMTI1LCJ5Ijo1MjR9LHsieCI6MzQxMy4zMTI1LCJ5Ijo1MjR9LHsieCI6MzUwOS44NTE1NjI1LCJ5Ijo1MjR9LHsieCI6MzYwNi4zOTA2MjUsInkiOjUyNH0seyJ4IjozNjMxLjM5MDYyNSwieSI6NTI0fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M3877.312,491L3895.148,483.818C3912.984,476.636,3948.656,462.272,3975.366,455.09C4002.076,447.908,4019.823,447.908,4028.697,447.908L4037.57,447.908" id="L_Store_Index_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Index_0" data-points="W3sieCI6Mzg3Ny4zMTIxNTU5NDgxMDUsInkiOjQ5MX0seyJ4IjozOTg0LjMyODEyNSwieSI6NDQ3LjkwNzc4MzUwODMwMDh9LHsieCI6NDA0MS41NzAzMTI1LCJ5Ijo0NDcuOTA3NzgzNTA4MzAwOH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M3877.312,557L3895.148,564.182C3912.984,571.364,3948.656,585.728,3969.992,592.91C3991.328,600.092,3998.328,600.092,4001.828,600.092L4005.328,600.092" id="L_Store_Threads_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Threads_0" data-points="W3sieCI6Mzg3Ny4zMTIxNTU5NDgxMDUsInkiOjU1N30seyJ4IjozOTg0LjMyODEyNSwieSI6NjAwLjA5MjIxNjQ5MTY5OTJ9LHsieCI6NDAwOS4zMjgxMjUsInkiOjYwMC4wOTIyMTY0OTE2OTkyfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M645.796,405L677.781,430.333C709.765,455.667,773.734,506.333,826.101,531.667C878.469,557,919.234,557,939.617,557L960,557" id="L_HistRail_ThreadSel_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_HistRail_ThreadSel_0" data-points="W3sieCI6NjQ1Ljc5NjEwNTI5NTU2NjUsInkiOjQwNX0seyJ4Ijo4MzcuNzAzMTI1LCJ5Ijo1NTd9LHsieCI6OTY0LCJ5Ijo1NTd9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1432.844,557L1453.677,557C1474.51,557,1516.177,557,1557.844,557C1599.51,557,1641.177,557,1665.529,556.16C1689.88,555.32,1696.917,553.641,1700.435,552.801L1703.953,551.961" id="L_ThreadSel_Composer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ThreadSel_Composer_0" data-points="W3sieCI6MTQzMi44NDM3NSwieSI6NTU3fSx7IngiOjE1NTcuODQzNzUsInkiOjU1N30seyJ4IjoxNjgyLjg0Mzc1LCJ5Ijo1NTd9LHsieCI6MTcwNy44NDM3NSwieSI6NTUxLjAzMjI1ODA2NDUxNjF9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M711.406,339.798L732.456,337.498C753.505,335.198,795.604,330.599,854.442,331.233C913.28,331.866,988.857,337.733,1026.645,340.666L1064.434,343.599" id="L_HistRail_ChatUI_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_HistRail_ChatUI_0" data-points="W3sieCI6NzExLjQwNjI1LCJ5IjozMzkuNzk3NzE5OTI5MjgxMjR9LHsieCI6ODM3LjcwMzEyNSwieSI6MzI2fSx7IngiOjEwNjguNDIxODc1LCJ5IjozNDMuOTA5MDM1Nzc5MjYwMTR9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(326.40625, 354)"><g class="label" data-id="L_Dev_HistRail_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Select thread / browse history</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(837.703125, 453)"><g class="label" data-id="L_Dev_Composer_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Prompt text + context</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_ChatUI_HistRail_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_ChatUI_Composer_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1557.84375, 354)"><g class="label" data-id="L_ChatUI_ChatSvc_0" transform="translate(-67.09375, -18)"><foreignObject width="134.1875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>sendRequest</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2195.5625, 80)"><g class="label" data-id="L_ChatSvc_LLM_0" transform="translate(-42.4453125, -18)"><foreignObject width="84.890625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Request</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2195.5625, 154)"><g class="label" data-id="L_LLM_ChatSvc_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Streaming tokens + final response</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2195.5625, 323)"><g class="label" data-id="L_ChatSvc_Bridge_0" transform="translate(-177.71875, -36)"><foreignObject width="355.4375" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>onDidCreateModel/onDidChange events</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2914.203125, 323)"><g class="label" data-id="L_Bridge_HistSvc_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Normalized turn updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1837.84375, 661)"><g class="label" data-id="L_HistSvc_HistRail_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Observable updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(3509.8515625, 524)"><g class="label" data-id="L_HistSvc_Store_0" transform="translate(-71.5390625, -18)"><foreignObject width="143.078125" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Persist deltas</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Index_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Threads_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(837.703125, 557)"><g class="label" data-id="L_HistRail_ThreadSel_0" transform="translate(-89.9453125, -18)"><foreignObject width="179.890625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Thread selection</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1557.84375, 557)"><g class="label" data-id="L_ThreadSel_Composer_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Restore model for active thread</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(889.72885, 330.03838)"><g class="label" data-id="L_HistRail_ChatUI_0" transform="translate(-101.296875, -36)"><foreignObject width="202.59375" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>Copy/Reuse/Open Session</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-Dev-0" transform="translate(117.203125, 418.4694633483887)"><rect class="basic label-container" style="" x="-84.203125" y="-33" width="168.40625" height="66"/><g class="label" style="" transform="translate(-54.203125, -18)"><rect/><foreignObject width="108.40625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Developer</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatUI-1" transform="translate(1198.421875, 354)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSClone Unified Chat View</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-HistRail-2" transform="translate(581.40625, 354)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>History Rail (embedded)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Composer-3" transform="translate(1837.84375, 520)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Composer + Model Toolbar</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Bridge-4" transform="translate(2593.7421875, 323)"><rect class="basic label-container" style="" x="-170.4609375" y="-33" width="340.921875" height="66"/><g class="label" style="" transform="translate(-140.4609375, -18)"><rect/><foreignObject width="280.921875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneChatSessionBridge</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-HistSvc-5" transform="translate(3213.7578125, 524)"><rect class="basic label-container" style="" x="-174.5546875" y="-33" width="349.109375" height="66"/><g class="label" style="" transform="translate(-144.5546875, -18)"><rect/><foreignObject width="289.109375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneChatHistoryService</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ThreadSel-6" transform="translate(1198.421875, 557)"><rect class="basic label-container" style="" x="-234.421875" y="-69" width="468.84375" height="138"/><g class="label" style="" transform="translate(-204.421875, -54)"><rect/><foreignObject width="408.84375" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>External: VSCloneThreadModelSelectionService (Story 3)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatSvc-7" transform="translate(1837.84375, 126)"><rect class="basic label-container" style="" x="-130" y="-69" width="260" height="138"/><g class="label" style="" transform="translate(-100, -54)"><rect/><foreignObject width="200" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>IChatService + IChatModel (existing)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Store-8" transform="translate(3795.359375, 524)"><rect class="basic label-container" style="" x="-163.96875" y="-33" width="327.9375" height="66"/><g class="label" style="" transform="translate(-133.96875, -18)"><rect/><foreignObject width="267.9375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneChatHistoryStore</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Index-9" transform="translate(4161.0859375, 447.9077835083008)"><path d="M0,16.415572152116063 a119.515625,16.415572152116063 0,0,0 239.03125,0 a119.515625,16.415572152116063 0,0,0 -239.03125,0 l0,67.41557215211606 a119.515625,16.415572152116063 0,0,0 239.03125,0 l0,-67.41557215211606" class="basic label-container" style="" transform="translate(-119.515625, -50.12335822817409)"/><g class="label" style="" transform="translate(-112.015625, -8)"><rect/><foreignObject width="224.03125" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>history.index.v1.json</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Threads-10" transform="translate(4161.0859375, 600.0922164916992)"><path d="M0,17.707383773928896 a151.7578125,17.707383773928896 0,0,0 303.515625,0 a151.7578125,17.707383773928896 0,0,0 -303.515625,0 l0,68.7073837739289 a151.7578125,17.707383773928896 0,0,0 303.515625,0 l0,-68.7073837739289" class="basic label-container" style="" transform="translate(-151.7578125, -52.061075660893344)"/><g class="label" style="" transform="translate(-144.2578125, -8)"><rect/><foreignObject width="288.515625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>threads/{threadId}.v1.json</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-LLM-11" transform="translate(2593.7421875, 117)"><rect class="basic label-container" style="" x="-130" y="-69" width="260" height="138"/><g class="label" style="" transform="translate(-100, -54)"><rect/><foreignObject width="200" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Model API (existing provider path)</p></span></div></foreignObject></g></g></g></g></g></svg>