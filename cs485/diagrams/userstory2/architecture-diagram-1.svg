<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 2756.53px; background-color: white;" viewBox="0 0 2756.53125 1170.251220703125" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster" id="Local" data-look="classic"><rect style="" x="2076.140625" y="8" width="672.390625" height="280.2511672973633"/><g class="cluster-label" transform="translate(2350.5078125, 8)"><foreignObject width="123.65625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Local Persistence</p></span></div></foreignObject></g></g><g class="cluster" id="Cloud" data-look="classic"><rect style="" x="2076.140625" y="308.2511672973633" width="346.265625" height="373"/><g class="cluster-label" transform="translate(2180.3671875, 308.2511672973633)"><foreignObject width="137.8125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Provider Cloud APIs</p></span></div></foreignObject></g></g><g class="cluster" id="Server" data-look="classic"><rect style="" x="544.53125" y="308.2511672973633" width="297.046875" height="168"/><g class="cluster-label" transform="translate(593.0546875, 308.2511672973633)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Extension Host / Chat Runtime</p></span></div></foreignObject></g></g><g class="cluster" id="Client" data-look="classic"><rect style="" x="8" y="701.2511672973633" width="2740.53125" height="461"/><g class="cluster-label" transform="translate(1278.265625, 701.2511672973633)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Workbench Renderer (Client)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M165.266,935.251L173.788,935.251C182.31,935.251,199.354,935.251,215.732,935.251C232.109,935.251,247.82,935.251,255.676,935.251L263.531,935.251" id="L_Dev_ChatUI_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Dev_ChatUI_0" data-points="W3sieCI6MTY1LjI2NTYyNSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9LHsieCI6MjE2LjM5ODQzNzUsInkiOjkzNS4yNTExNjcyOTczNjMzfSx7IngiOjI2Ny41MzEyNSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M440.375,935.251L449.055,935.251C457.734,935.251,475.094,935.251,492.453,935.251C509.813,935.251,527.172,935.251,559.167,851.893C591.163,768.535,637.794,601.819,661.11,518.461L684.425,435.103" id="L_ChatUI_ChatModel_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatUI_ChatModel_0" data-points="W3sieCI6NDQwLjM3NSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9LHsieCI6NDkyLjQ1MzEyNSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9LHsieCI6NTQ0LjUzMTI1LCJ5Ijo5MzUuMjUxMTY3Mjk3MzYzM30seyJ4Ijo2ODUuNTAyNjQ4MzA1MDg0OCwieSI6NDMxLjI1MTE2NzI5NzM2MzN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M816.578,413.4L820.745,413.708C824.911,414.017,833.245,414.634,858.245,414.943C883.245,415.251,924.911,415.251,987.931,415.251C1050.951,415.251,1135.323,415.251,1219.695,415.251C1304.068,415.251,1388.44,415.251,1469.055,415.251C1549.669,415.251,1626.526,415.251,1704.815,415.251C1783.104,415.251,1862.826,415.251,1924.952,415.251C1987.078,415.251,2031.609,415.251,2063.824,413.642C2096.038,412.033,2115.935,408.815,2125.884,407.206L2135.833,405.597" id="L_ChatModel_Inference_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatModel_Inference_0" data-points="W3sieCI6ODE2LjU3ODEyNSwieSI6NDEzLjM5OTYwNzY3Mzk4NzM2fSx7IngiOjg0MS41NzgxMjUsInkiOjQxNS4yNTExNjcyOTczNjMzfSx7IngiOjk2Ni41NzgxMjUsInkiOjQxNS4yNTExNjcyOTczNjMzfSx7IngiOjEyMTkuNjk1MzEyNSwieSI6NDE1LjI1MTE2NzI5NzM2MzN9LHsieCI6MTQ3Mi44MTI1LCJ5Ijo0MTUuMjUxMTY3Mjk3MzYzM30seyJ4IjoxNzAzLjM4MjgxMjUsInkiOjQxNS4yNTExNjcyOTczNjMzfSx7IngiOjE5NDIuNTQ2ODc1LCJ5Ijo0MTUuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6NDE1LjI1MTE2NzI5NzM2MzN9LHsieCI6MjEzOS43ODEyNSwieSI6NDA0Ljk1ODg1MTk2ODYzMjY0fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2139.781,369.543L2129.174,367.828C2118.568,366.113,2097.354,362.682,2064.482,360.967C2031.609,359.251,1987.078,359.251,1924.952,359.251C1862.826,359.251,1783.104,359.251,1704.815,359.251C1626.526,359.251,1549.669,359.251,1469.055,359.251C1388.44,359.251,1304.068,359.251,1219.695,359.251C1135.323,359.251,1050.951,359.251,987.931,359.251C924.911,359.251,883.245,359.251,853.148,362.058C823.051,364.865,804.524,370.478,795.26,373.285L785.997,376.091" id="L_Inference_ChatModel_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Inference_ChatModel_0" data-points="W3sieCI6MjEzOS43ODEyNSwieSI6MzY5LjU0MzQ4MjYyNjA5Mzl9LHsieCI6MjA3Ni4xNDA2MjUsInkiOjM1OS4yNTExNjcyOTczNjMzfSx7IngiOjE5NDIuNTQ2ODc1LCJ5IjozNTkuMjUxMTY3Mjk3MzYzM30seyJ4IjoxNzAzLjM4MjgxMjUsInkiOjM1OS4yNTExNjcyOTczNjMzfSx7IngiOjE0NzIuODEyNSwieSI6MzU5LjI1MTE2NzI5NzM2MzN9LHsieCI6MTIxOS42OTUzMTI1LCJ5IjozNTkuMjUxMTY3Mjk3MzYzM30seyJ4Ijo5NjYuNTc4MTI1LCJ5IjozNTkuMjUxMTY3Mjk3MzYzM30seyJ4Ijo4NDEuNTc4MTI1LCJ5IjozNTkuMjUxMTY3Mjk3MzYzM30seyJ4Ijo3ODIuMTY4NzUsInkiOjM3Ny4yNTExNjcyOTczNjMzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M816.578,430.033L820.745,430.903C824.911,431.772,833.245,433.512,858.245,517.715C883.245,601.918,924.911,768.585,965.911,851.918C1006.911,935.251,1047.245,935.251,1067.411,935.251L1087.578,935.251" id="L_ChatModel_Bridge_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatModel_Bridge_0" data-points="W3sieCI6ODE2LjU3ODEyNSwieSI6NDMwLjAzMzEzNTYzMTQ4NTZ9LHsieCI6ODQxLjU3ODEyNSwieSI6NDM1LjI1MTE2NzI5NzM2MzN9LHsieCI6OTY2LjU3ODEyNSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9LHsieCI6MTA5MS41NzgxMjUsInkiOjkzNS4yNTExNjcyOTczNjMzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1347.813,935.251L1368.646,935.251C1389.479,935.251,1431.146,935.251,1472.146,935.251C1513.146,935.251,1553.479,935.251,1573.646,935.251L1593.813,935.251" id="L_Bridge_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Bridge_UsageSvc_0" data-points="W3sieCI6MTM0Ny44MTI1LCJ5Ijo5MzUuMjUxMTY3Mjk3MzYzM30seyJ4IjoxNDcyLjgxMjUsInkiOjkzNS4yNTExNjcyOTczNjMzfSx7IngiOjE1OTcuODEyNSwieSI6OTM1LjI1MTE2NzI5NzM2MzN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1794.333,908.251L1819.035,900.918C1843.737,893.585,1893.142,878.918,1940.11,871.585C1987.078,864.251,2031.609,864.251,2079.325,811.186C2127.04,758.12,2177.94,651.989,2203.39,598.923L2228.84,545.858" id="L_UsageSvc_UsageAPI_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_UsageAPI_0" data-points="W3sieCI6MTc5NC4zMzI1MjY0MDg0NTA4LCJ5Ijo5MDguMjUxMTY3Mjk3MzYzM30seyJ4IjoxOTQyLjU0Njg3NSwieSI6ODY0LjI1MTE2NzI5NzM2MzN9LHsieCI6MjA3Ni4xNDA2MjUsInkiOjg2NC4yNTExNjcyOTczNjMzfSx7IngiOjIyMzAuNTY5MzM4NjQyNjU5LCJ5Ijo1NDIuMjUxMTY3Mjk3MzYzM31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2226.228,542.251L2201.214,584.585C2176.199,626.918,2126.17,711.585,2078.89,753.918C2031.609,796.251,1987.078,796.251,1933.271,814.583C1879.464,832.915,1816.381,869.578,1784.839,887.91L1753.297,906.241" id="L_UsageAPI_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageAPI_UsageSvc_0" data-points="W3sieCI6MjIyNi4yMjg0NTU2MzEzOTk0LCJ5Ijo1NDIuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6Nzk2LjI1MTE2NzI5NzM2MzN9LHsieCI6MTk0Mi41NDY4NzUsInkiOjc5Ni4yNTExNjcyOTczNjMzfSx7IngiOjE3NDkuODM5MTQxMTg3MDUwMiwieSI6OTA4LjI1MTE2NzI5NzM2MzN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1808.953,948.052L1831.219,950.752C1853.484,953.452,1898.016,958.852,1942.547,961.551C1987.078,964.251,2031.609,964.251,2080.173,911.847C2128.737,859.443,2181.333,754.635,2207.632,702.23L2233.93,649.826" id="L_UsageSvc_QuotaAPI_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_QuotaAPI_0" data-points="W3sieCI6MTgwOC45NTMxMjUsInkiOjk0OC4wNTIxNjY4NzI3MDcxfSx7IngiOjE5NDIuNTQ2ODc1LCJ5Ijo5NjQuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6OTY0LjI1MTE2NzI5NzM2MzN9LHsieCI6MjIzNS43MjM5MTMwNDM0NzgsInkiOjY0Ni4yNTExNjcyOTczNjMzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2233.743,646.251L2207.476,691.918C2181.209,737.585,2128.675,828.918,2080.142,874.585C2031.609,920.251,1987.078,920.251,1943.212,921.606C1899.346,922.961,1856.146,925.67,1834.546,927.025L1812.945,928.38" id="L_QuotaAPI_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_QuotaAPI_UsageSvc_0" data-points="W3sieCI6MjIzMy43NDMyNTE2NjExMjk4LCJ5Ijo2NDYuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6OTIwLjI1MTE2NzI5NzM2MzN9LHsieCI6MTk0Mi41NDY4NzUsInkiOjkyMC4yNTExNjcyOTczNjMzfSx7IngiOjE4MDguOTUzMTI1LCJ5Ijo5MjguNjI5OTYwNjIwNDYxNH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1808.953,962.177L1831.219,967.856C1853.484,973.535,1898.016,984.893,1942.547,990.572C1987.078,996.251,2031.609,996.251,2057.375,996.251C2083.141,996.251,2090.141,996.251,2093.641,996.251L2097.141,996.251" id="L_UsageSvc_Agg_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_Agg_0" data-points="W3sieCI6MTgwOC45NTMxMjUsInkiOjk2Mi4xNzc0MDc3ODM0MzEyfSx7IngiOjE5NDIuNTQ2ODc1LCJ5Ijo5OTYuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6OTk2LjI1MTE2NzI5NzM2MzN9LHsieCI6MjEwMS4xNDA2MjUsInkiOjk5Ni4yNTExNjcyOTczNjMzfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2397.406,996.251L2401.573,996.251C2405.74,996.251,2414.073,996.251,2422.406,996.251C2430.74,996.251,2439.073,996.251,2446.74,996.251C2454.406,996.251,2461.406,996.251,2464.906,996.251L2468.406,996.251" id="L_Agg_Budget_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Agg_Budget_0" data-points="W3sieCI6MjM5Ny40MDYyNSwieSI6OTk2LjI1MTE2NzI5NzM2MzN9LHsieCI6MjQyMi40MDYyNSwieSI6OTk2LjI1MTE2NzI5NzM2MzN9LHsieCI6MjQ0Ny40MDYyNSwieSI6OTk2LjI1MTE2NzI5NzM2MzN9LHsieCI6MjQ3Mi40MDYyNSwieSI6OTk2LjI1MTE2NzI5NzM2MzN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1739.257,962.251L1773.139,987.751C1807.021,1013.251,1874.784,1064.251,1930.931,1089.751C1987.078,1115.251,2031.609,1115.251,2061.022,1114.632C2090.435,1114.013,2104.729,1112.774,2111.876,1112.155L2119.023,1111.536" id="L_UsageSvc_View_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_View_0" data-points="W3sieCI6MTczOS4yNTc0MjE4NzUsInkiOjk2Mi4yNTExNjcyOTczNjMzfSx7IngiOjE5NDIuNTQ2ODc1LCJ5IjoxMTE1LjI1MTE2NzI5NzM2MzN9LHsieCI6MjA3Ni4xNDA2MjUsInkiOjExMTUuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMTIzLjAwNzgxMjUsInkiOjExMTEuMTkwNjU1NTg3NjAyOH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1736.498,908.251L1770.839,880.251C1805.181,852.251,1873.864,796.251,1930.471,768.251C1987.078,740.251,2031.609,740.251,2081.229,646.63C2130.848,553.009,2185.555,365.766,2212.909,272.145L2240.263,178.524" id="L_UsageSvc_Store_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_Store_0" data-points="W3sieCI6MTczNi40OTc4MzY1Mzg0NjE2LCJ5Ijo5MDguMjUxMTY3Mjk3MzYzM30seyJ4IjoxOTQyLjU0Njg3NSwieSI6NzQwLjI1MTE2NzI5NzM2MzN9LHsieCI6MjA3Ni4xNDA2MjUsInkiOjc0MC4yNTExNjcyOTczNjMzfSx7IngiOjIyNDEuMzg0NzI3NDk0MDUxLCJ5IjoxNzQuNjg0NTgzNjYzOTQwNDN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2321.121,120.685L2338.002,114.341C2354.883,107.997,2388.644,95.309,2409.692,88.966C2430.74,82.622,2439.073,82.622,2455.605,82.622C2472.138,82.622,2496.87,82.622,2509.236,82.622L2521.602,82.622" id="L_Store_Ledger_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Ledger_0" data-points="W3sieCI6MjMyMS4xMjA3Mzc3MjIyMzIsInkiOjEyMC42ODQ1ODM2NjM5NDA0M30seyJ4IjoyNDIyLjQwNjI1LCJ5Ijo4Mi42MjE3OTE4Mzk1OTk2MX0seyJ4IjoyNDQ3LjQwNjI1LCJ5Ijo4Mi42MjE3OTE4Mzk1OTk2MX0seyJ4IjoyNTI1LjYwMTU2MjUsInkiOjgyLjYyMTc5MTgzOTU5OTYxfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2321.121,174.685L2338.002,181.028C2354.883,187.372,2388.644,200.06,2409.692,206.404C2430.74,212.747,2439.073,212.747,2454.404,212.747C2469.734,212.747,2492.063,212.747,2503.227,212.747L2514.391,212.747" id="L_Store_Summary_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Summary_0" data-points="W3sieCI6MjMyMS4xMjA3Mzc3MjIyMzIsInkiOjE3NC42ODQ1ODM2NjM5NDA0M30seyJ4IjoyNDIyLjQwNjI1LCJ5IjoyMTIuNzQ3Mzc1NDg4MjgxMjV9LHsieCI6MjQ0Ny40MDYyNSwieSI6MjEyLjc0NzM3NTQ4ODI4MTI1fSx7IngiOjI1MTguMzkwNjI1LCJ5IjoyMTIuNzQ3Mzc1NDg4MjgxMjV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2140.562,1073.251L2129.825,1070.585C2119.088,1067.918,2097.614,1062.585,2064.612,1059.918C2031.609,1057.251,1987.078,1057.251,1934.367,1041.721C1881.656,1026.19,1820.766,995.13,1790.321,979.599L1759.876,964.069" id="L_View_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_View_UsageSvc_0" data-points="W3sieCI6MjE0MC41NjIxMzY2Mjc5MDcsInkiOjEwNzMuMjUxMTY3Mjk3MzYzM30seyJ4IjoyMDc2LjE0MDYyNSwieSI6MTA1Ny4yNTExNjcyOTczNjMzfSx7IngiOjE5NDIuNTQ2ODc1LCJ5IjoxMDU3LjI1MTE2NzI5NzM2MzN9LHsieCI6MTc1Ni4zMTI1NjQwMzY4ODUzLCJ5Ijo5NjIuMjUxMTY3Mjk3MzYzM31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(216.3984375, 935.2511672973633)"><g class="label" data-id="L_Dev_ChatUI_0" transform="translate(-26.1328125, -12)"><foreignObject width="52.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>prompt</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(492.453125, 935.2511672973633)"><g class="label" data-id="L_ChatUI_ChatModel_0" transform="translate(-27.078125, -12)"><foreignObject width="54.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>request</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1472.8125, 415.2511672973633)"><g class="label" data-id="L_ChatModel_Inference_0" transform="translate(-63.625, -12)"><foreignObject width="127.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>inference request</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1472.8125, 359.2511672973633)"><g class="label" data-id="L_Inference_ChatModel_0" transform="translate(-100, -24)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>response + provider correlation id</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(966.578125, 935.2511672973633)"><g class="label" data-id="L_ChatModel_Bridge_0" transform="translate(-100, -24)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>request lifecycle + provider references</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1472.8125, 935.2511672973633)"><g class="label" data-id="L_Bridge_UsageSvc_0" transform="translate(-100, -24)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>normalized request references</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 864.2511672973633)"><g class="label" data-id="L_UsageSvc_UsageAPI_0" transform="translate(-100, -24)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>sync query by provider request id</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 796.2511672973633)"><g class="label" data-id="L_UsageAPI_UsageSvc_0" transform="translate(-100, -24)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>authoritative token/cost rows</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 964.2511672973633)"><g class="label" data-id="L_UsageSvc_QuotaAPI_0" transform="translate(-43.15625, -12)"><foreignObject width="86.3125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>quota query</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 920.2511672973633)"><g class="label" data-id="L_QuotaAPI_UsageSvc_0" transform="translate(-92.296875, -12)"><foreignObject width="184.59375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>remaining quota snapshot</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_UsageSvc_Agg_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Agg_Budget_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 1115.2511672973633)"><g class="label" data-id="L_UsageSvc_View_0" transform="translate(-48.8203125, -12)"><foreignObject width="97.640625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>state updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 740.2511672973633)"><g class="label" data-id="L_UsageSvc_Store_0" transform="translate(-66.015625, -12)"><foreignObject width="132.03125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>append + compact</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Ledger_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Summary_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1942.546875, 1057.2511672973633)"><g class="label" data-id="L_View_UsageSvc_0" transform="translate(-108.59375, -12)"><foreignObject width="217.1875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>export/copy/filter/clear/sync</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-Dev-0" transform="translate(99.1328125, 935.2511672973633)"><rect class="basic label-container" style="" x="-66.1328125" y="-27" width="132.265625" height="54"/><g class="label" style="" transform="translate(-36.1328125, -12)"><rect/><foreignObject width="72.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Developer</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatUI-1" transform="translate(353.953125, 935.2511672973633)"><rect class="basic label-container" style="" x="-86.421875" y="-27" width="172.84375" height="54"/><g class="label" style="" transform="translate(-56.421875, -12)"><rect/><foreignObject width="112.84375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Existing Chat UI</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Bridge-2" transform="translate(1219.6953125, 935.2511672973633)"><rect class="basic label-container" style="" x="-128.1171875" y="-27" width="256.234375" height="54"/><g class="label" style="" transform="translate(-98.1171875, -12)"><rect/><foreignObject width="196.234375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>VSCloneUsageSessionBridge</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-UsageSvc-3" transform="translate(1703.3828125, 935.2511672973633)"><rect class="basic label-container" style="" x="-105.5703125" y="-27" width="211.140625" height="54"/><g class="label" style="" transform="translate(-75.5703125, -12)"><rect/><foreignObject width="151.140625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>VSCloneUsageService</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Agg-4" transform="translate(2249.2734375, 996.2511672973633)"><rect class="basic label-container" style="" x="-148.1328125" y="-27" width="296.265625" height="54"/><g class="label" style="" transform="translate(-118.1328125, -12)"><rect/><foreignObject width="236.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageAggregationService</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Budget-5" transform="translate(2597.96875, 996.2511672973633)"><rect class="basic label-container" style="" x="-125.5625" y="-27" width="251.125" height="54"/><g class="label" style="" transform="translate(-95.5625, -12)"><rect/><foreignObject width="191.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>VSCloneUsageBudgetPolicy</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-View-6" transform="translate(2249.2734375, 1100.2511672973633)"><rect class="basic label-container" style="" x="-126.265625" y="-27" width="252.53125" height="54"/><g class="label" style="" transform="translate(-96.265625, -12)"><rect/><foreignObject width="192.53125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>VSCloneUsageLogViewPane</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatModel-7" transform="translate(693.0546875, 404.2511672973633)"><rect class="basic label-container" style="" x="-123.5234375" y="-27" width="247.046875" height="54"/><g class="label" style="" transform="translate(-93.5234375, -12)"><rect/><foreignObject width="187.046875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>IChatService + IChatModel</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Inference-8" transform="translate(2249.2734375, 387.2511672973633)"><rect class="basic label-container" style="" x="-109.4921875" y="-27" width="218.984375" height="54"/><g class="label" style="" transform="translate(-79.4921875, -12)"><rect/><foreignObject width="158.984375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Provider Inference API</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-UsageAPI-9" transform="translate(2249.2734375, 503.2511672973633)"><rect class="basic label-container" style="" x="-131.7421875" y="-39" width="263.484375" height="78"/><g class="label" style="" transform="translate(-101.7421875, -24)"><rect/><foreignObject width="203.484375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Provider Usage API\n(OpenAI/Anthropic/...)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-QuotaAPI-10" transform="translate(2249.2734375, 619.2511672973633)"><rect class="basic label-container" style="" x="-123.2421875" y="-27" width="246.484375" height="54"/><g class="label" style="" transform="translate(-93.2421875, -12)"><rect/><foreignObject width="186.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Provider Quota/Billing API</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Store-11" transform="translate(2249.2734375, 147.68458366394043)"><rect class="basic label-container" style="" x="-98.515625" y="-27" width="197.03125" height="54"/><g class="label" style="" transform="translate(-68.515625, -12)"><rect/><foreignObject width="137.03125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>VSCloneUsageStore</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Ledger-12" transform="translate(2597.96875, 82.62179183959961)"><path d="M0,13.414528181660199 a72.3671875,13.414528181660199 0,0,0 144.734375,0 a72.3671875,13.414528181660199 0,0,0 -144.734375,0 l0,52.4145281816602 a72.3671875,13.414528181660199 0,0,0 144.734375,0 l0,-52.4145281816602" class="basic label-container" style="" transform="translate(-72.3671875, -39.621792272490296)"/><g class="label" style="" transform="translate(-64.8671875, -2)"><rect/><foreignObject width="129.734375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>usage-ledger.jsonl</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Summary-13" transform="translate(2597.96875, 212.74737548828125)"><path d="M0,14.002529418233806 a79.578125,14.002529418233806 0,0,0 159.15625,0 a79.578125,14.002529418233806 0,0,0 -159.15625,0 l0,53.002529418233806 a79.578125,14.002529418233806 0,0,0 159.15625,0 l0,-53.002529418233806" class="basic label-container" style="" transform="translate(-79.578125, -40.50379412735071)"/><g class="label" style="" transform="translate(-72.078125, -2)"><rect/><foreignObject width="144.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>usage-summary.json</p></span></div></foreignObject></g></g></g></g></g></svg>