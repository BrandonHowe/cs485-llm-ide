<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 3420.84px; background-color: transparent;" viewBox="0 0 3420.84375 1151.8529052734375" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:24px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:24px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster" id="Local" data-look="classic"><rect style="" x="2551.765625" y="755" width="861.078125" height="388.8529357910156"/><g class="cluster-label" transform="translate(2889.5625, 755)"><foreignObject width="185.484375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Local Persistence</p></span></div></foreignObject></g></g><g class="cluster" id="Cloud" data-look="classic"><rect style="" x="1250.296875" y="8" width="448.09375" height="396"/><g class="cluster-label" transform="translate(1391.046875, 8)"><foreignObject width="166.59375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Cloud Providers</p></span></div></foreignObject></g></g><g class="cluster" id="Server" data-look="classic"><rect style="" x="690.296875" y="17" width="310" height="200"/><g class="cluster-label" transform="translate(745.296875, 17)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Extension Host / Chat Runtime</p></span></div></foreignObject></g></g><g class="cluster" id="Client" data-look="classic"><rect style="" x="8" y="424" width="3404.84375" height="311"/><g class="cluster-label" transform="translate(1610.421875, 424)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Workbench Renderer (Client)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M201.406,596L212.105,596C222.805,596,244.203,596,264.935,596C285.667,596,305.732,596,315.764,596L325.797,596" id="L_Dev_ChatUI_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Dev_ChatUI_0" data-points="W3sieCI6MjAxLjQwNjI1LCJ5Ijo1OTZ9LHsieCI6MjY1LjYwMTU2MjUsInkiOjU5Nn0seyJ4IjozMjkuNzk2ODc1LCJ5Ijo1OTZ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M559.063,596L569.999,596C580.935,596,602.807,596,624.68,596C646.552,596,668.424,596,702.238,525.301C736.052,454.602,781.807,313.204,804.685,242.505L827.562,171.806" id="L_ChatUI_ChatModel_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatUI_ChatModel_0" data-points="W3sieCI6NTU5LjA2MjUsInkiOjU5Nn0seyJ4Ijo2MjQuNjc5Njg3NSwieSI6NTk2fSx7IngiOjY5MC4yOTY4NzUsInkiOjU5Nn0seyJ4Ijo4MjguNzkzNzQzNDc1OTkxNiwieSI6MTY4fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M975.297,85.968L979.464,84.973C983.63,83.978,991.964,81.989,1016.964,80.995C1041.964,80,1083.63,80,1125.297,80C1166.964,80,1208.63,80,1232.97,80.501C1257.31,81.002,1264.324,82.003,1267.83,82.504L1271.337,83.005" id="L_ChatModel_LLM_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatModel_LLM_0" data-points="W3sieCI6OTc1LjI5Njg3NSwieSI6ODUuOTY3NzQxOTM1NDgzODd9LHsieCI6MTAwMC4yOTY4NzUsInkiOjgwfSx7IngiOjExMjUuMjk2ODc1LCJ5Ijo4MH0seyJ4IjoxMjUwLjI5Njg3NSwieSI6ODB9LHsieCI6MTI3NS4yOTY4NzUsInkiOjgzLjU3MDY4MTM1ODUzMjY4fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1275.297,149.313L1271.13,150.095C1266.964,150.876,1258.63,152.438,1233.63,153.219C1208.63,154,1166.964,154,1125.297,154C1083.63,154,1041.964,154,1017.612,153.16C993.26,152.32,986.224,150.641,982.706,149.801L979.188,148.961" id="L_LLM_ChatModel_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_LLM_ChatModel_0" data-points="W3sieCI6MTI3NS4yOTY4NzUsInkiOjE0OS4zMTM0ODA3MTY5MjU4OH0seyJ4IjoxMjUwLjI5Njg3NSwieSI6MTU0fSx7IngiOjExMjUuMjk2ODc1LCJ5IjoxNTR9LHsieCI6MTAwMC4yOTY4NzUsInkiOjE1NH0seyJ4Ijo5NzUuMjk2ODc1LCJ5IjoxNDguMDMyMjU4MDY0NTE2MTN9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1609.922,300L1624.667,300C1639.411,300,1668.901,300,1704.479,330.333C1740.057,360.667,1781.724,421.333,1835.418,467.708C1889.112,514.082,1954.832,546.164,1987.693,562.204L2020.553,578.245" id="L_Ent_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Ent_UsageSvc_0" data-points="W3sieCI6MTYwOS45MjE4NzUsInkiOjMwMH0seyJ4IjoxNjk4LjM5MDYyNSwieSI6MzAwfSx7IngiOjE4MjMuMzkwNjI1LCJ5Ijo0ODJ9LHsieCI6MjAyNC4xNDgwMjAwMzgxNjgsInkiOjU4MH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M975.297,164.806L979.464,166.339C983.63,167.871,991.964,170.935,1016.964,254.634C1041.964,338.333,1083.63,502.667,1125.297,584.833C1166.964,667,1208.63,667,1236.609,667C1264.589,667,1278.88,667,1286.026,667L1293.172,667" id="L_ChatModel_Bridge_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_ChatModel_Bridge_0" data-points="W3sieCI6OTc1LjI5Njg3NSwieSI6MTY0LjgwNjQ1MTYxMjkwMzIzfSx7IngiOjEwMDAuMjk2ODc1LCJ5IjoxNzR9LHsieCI6MTEyNS4yOTY4NzUsInkiOjY2N30seyJ4IjoxMjUwLjI5Njg3NSwieSI6NjY3fSx7IngiOjEyOTcuMTcxODc1LCJ5Ijo2Njd9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1651.516,667L1659.328,667C1667.141,667,1682.766,667,1711.411,667C1740.057,667,1781.724,667,1822.737,662.939C1863.75,658.879,1904.11,650.757,1924.289,646.697L1944.469,642.636" id="L_Bridge_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Bridge_UsageSvc_0" data-points="W3sieCI6MTY1MS41MTU2MjUsInkiOjY2N30seyJ4IjoxNjk4LjM5MDYyNSwieSI6NjY3fSx7IngiOjE4MjMuMzkwNjI1LCJ5Ijo2Njd9LHsieCI6MTk0OC4zOTA2MjUsInkiOjY0MS44NDcxNjE1NzIwNTI0fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2174.028,580L2210.597,565.333C2247.165,550.667,2320.301,521.333,2383.257,506.667C2446.214,492,2498.99,492,2528.878,492C2558.766,492,2565.766,492,2569.266,492L2572.766,492" id="L_UsageSvc_Agg_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_Agg_0" data-points="W3sieCI6MjE3NC4wMjg0MDkwOTA5MDksInkiOjU4MH0seyJ4IjoyMzkzLjQzNzUsInkiOjQ5Mn0seyJ4IjoyNTUxLjc2NTYyNSwieSI6NDkyfSx7IngiOjI1NzYuNzY1NjI1LCJ5Ijo0OTJ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2991.156,492L2995.323,492C2999.49,492,3007.823,492,3015.49,492C3023.156,492,3030.156,492,3033.656,492L3037.156,492" id="L_Agg_Budget_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Agg_Budget_0" data-points="W3sieCI6Mjk5MS4xNTYyNSwieSI6NDkyfSx7IngiOjMwMTYuMTU2MjUsInkiOjQ5Mn0seyJ4IjozMDQxLjE1NjI1LCJ5Ijo0OTJ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2235.109,594.468L2261.497,591.056C2287.885,587.645,2340.661,580.823,2393.438,577.411C2446.214,574,2498.99,574,2534.351,575.314C2569.712,576.628,2587.658,579.256,2596.632,580.57L2605.605,581.884" id="L_UsageSvc_View_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_View_0" data-points="W3sieCI6MjIzNS4xMDkzNzUsInkiOjU5NC40Njc1MjY0MTM5MjE2fSx7IngiOjIzOTMuNDM3NSwieSI6NTc0fSx7IngiOjI1NTEuNzY1NjI1LCJ5Ijo1NzR9LHsieCI6MjYwOS41NjI1LCJ5Ijo1ODIuNDYzMTA2ODk0MTE1M31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2210.27,646L2240.798,654.5C2271.326,663,2332.382,680,2389.298,688.5C2446.214,697,2498.99,697,2558.566,733.08C2618.143,769.161,2684.52,841.322,2717.709,877.402L2750.898,913.483" id="L_UsageSvc_Store_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_UsageSvc_Store_0" data-points="W3sieCI6MjIxMC4yNzAwODkyODU3MTQsInkiOjY0Nn0seyJ4IjoyMzkzLjQzNzUsInkiOjY5N30seyJ4IjoyNTUxLjc2NTYyNSwieSI6Njk3fSx7IngiOjI3NTMuNjA1Nzc5NTE1MjUyNCwieSI6OTE2LjQyNjQ2Nzg5NTUwNzh9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2867.056,916.426L2891.906,906.558C2916.756,896.689,2966.456,876.951,3005.78,867.082C3045.104,857.213,3074.052,857.213,3088.526,857.213L3103,857.213" id="L_Store_Ledger_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Ledger_0" data-points="W3sieCI6Mjg2Ny4wNTU3OTI1OTI1MDY0LCJ5Ijo5MTYuNDI2NDY3ODk1NTA3OH0seyJ4IjozMDE2LjE1NjI1LCJ5Ijo4NTcuMjEzMjMzOTQ3NzUzOX0seyJ4IjozMTA3LCJ5Ijo4NTcuMjEzMjMzOTQ3NzUzOX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2867.056,982.426L2891.906,992.295C2916.756,1002.164,2966.456,1021.902,3005.78,1031.771C3045.104,1041.64,3074.052,1041.64,3088.526,1041.64L3103,1041.64" id="L_Store_Summary_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_Store_Summary_0" data-points="W3sieCI6Mjg2Ny4wNTU3OTI1OTI1MDY0LCJ5Ijo5ODIuNDI2NDY3ODk1NTA3OH0seyJ4IjozMDE2LjE1NjI1LCJ5IjoxMDQxLjYzOTcwMTg0MzI2MTd9LHsieCI6MzEwNywieSI6MTA0MS42Mzk3MDE4NDMyNjE3fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M2609.563,632.786L2599.93,634.155C2590.297,635.524,2571.031,638.262,2535.01,639.631C2498.99,641,2446.214,641,2394.101,638.613C2341.989,636.225,2290.541,631.45,2264.816,629.063L2239.092,626.675" id="L_View_UsageSvc_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_View_UsageSvc_0" data-points="W3sieCI6MjYwOS41NjI1LCJ5Ijo2MzIuNzg1ODA4MDE0NTM1Mn0seyJ4IjoyNTUxLjc2NTYyNSwieSI6NjQxfSx7IngiOjIzOTMuNDM3NSwieSI6NjQxfSx7IngiOjIyMzUuMTA5Mzc1LCJ5Ijo2MjYuMzA1MzY1NjUxNTQzNH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(265.6015625, 596)"><g class="label" data-id="L_Dev_ChatUI_0" transform="translate(-39.1953125, -18)"><foreignObject width="78.390625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>prompt</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(624.6796875, 596)"><g class="label" data-id="L_ChatUI_ChatModel_0" transform="translate(-40.6171875, -18)"><foreignObject width="81.234375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>request</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1125.296875, 80)"><g class="label" data-id="L_ChatModel_LLM_0" transform="translate(-95.4375, -18)"><foreignObject width="190.875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>inference request</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1125.296875, 154)"><g class="label" data-id="L_LLM_ChatModel_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>response + usage tokens</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1799.08589, 446.6123)"><g class="label" data-id="L_Ent_UsageSvc_0" transform="translate(-86.234375, -18)"><foreignObject width="172.46875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>quota snapshots</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1125.296875, 667)"><g class="label" data-id="L_ChatModel_Bridge_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>request/response + usage updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1823.390625, 667)"><g class="label" data-id="L_Bridge_UsageSvc_0" transform="translate(-100, -36)"><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>normalized usage events</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_UsageSvc_Agg_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Agg_Budget_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2393.4375, 574)"><g class="label" data-id="L_UsageSvc_View_0" transform="translate(-73.234375, -18)"><foreignObject width="146.46875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>state updates</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2393.4375, 697)"><g class="label" data-id="L_UsageSvc_Store_0" transform="translate(-99.0234375, -18)"><foreignObject width="198.046875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>append + compact</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Ledger_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_Store_Summary_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(2393.4375, 641)"><g class="label" data-id="L_View_UsageSvc_0" transform="translate(-133.328125, -18)"><foreignObject width="266.65625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="edgeLabel"><p>export/copy/filter/clear</p></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-Dev-0" transform="translate(117.203125, 596)"><rect class="basic label-container" style="" x="-84.203125" y="-33" width="168.40625" height="66"/><g class="label" style="" transform="translate(-54.203125, -18)"><rect/><foreignObject width="108.40625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Developer</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatUI-1" transform="translate(444.4296875, 596)"><rect class="basic label-container" style="" x="-114.6328125" y="-33" width="229.265625" height="66"/><g class="label" style="" transform="translate(-84.6328125, -18)"><rect/><foreignObject width="169.265625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Existing Chat UI</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Bridge-2" transform="translate(1474.34375, 667)"><rect class="basic label-container" style="" x="-177.171875" y="-33" width="354.34375" height="66"/><g class="label" style="" transform="translate(-147.171875, -18)"><rect/><foreignObject width="294.34375" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageSessionBridge</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-UsageSvc-3" transform="translate(2091.75, 613)"><rect class="basic label-container" style="" x="-143.359375" y="-33" width="286.71875" height="66"/><g class="label" style="" transform="translate(-113.359375, -18)"><rect/><foreignObject width="226.71875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageService</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Agg-4" transform="translate(2783.9609375, 492)"><rect class="basic label-container" style="" x="-207.1953125" y="-33" width="414.390625" height="66"/><g class="label" style="" transform="translate(-177.1953125, -18)"><rect/><foreignObject width="354.390625" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageAggregationService</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Budget-5" transform="translate(3214.5, 492)"><rect class="basic label-container" style="" x="-173.34375" y="-33" width="346.6875" height="66"/><g class="label" style="" transform="translate(-143.34375, -18)"><rect/><foreignObject width="286.6875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageBudgetPolicy</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-View-6" transform="translate(2783.9609375, 608)"><rect class="basic label-container" style="" x="-174.3984375" y="-33" width="348.796875" height="66"/><g class="label" style="" transform="translate(-144.3984375, -18)"><rect/><foreignObject width="288.796875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageLogViewPane</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-ChatModel-7" transform="translate(845.296875, 117)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>IChatService + IChatModel</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-LLM-8" transform="translate(1474.34375, 112)"><rect class="basic label-container" style="" x="-199.046875" y="-69" width="398.09375" height="138"/><g class="label" style="" transform="translate(-169.046875, -54)"><rect/><foreignObject width="338.09375" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>LLM Provider\n(prompt/completion tokens)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Ent-9" transform="translate(1474.34375, 300)"><rect class="basic label-container" style="" x="-135.578125" y="-69" width="271.15625" height="138"/><g class="label" style="" transform="translate(-105.578125, -54)"><rect/><foreignObject width="211.15625" height="108"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Entitlement/Quota API\n(remaining request quotas)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Store-10" transform="translate(2783.9609375, 949.4264678955078)"><rect class="basic label-container" style="" x="-132.7734375" y="-33" width="265.546875" height="66"/><g class="label" style="" transform="translate(-102.7734375, -18)"><rect/><foreignObject width="205.546875" height="36"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>VSCloneUsageStore</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Ledger-11" transform="translate(3214.5, 857.2132339477539)"><path d="M0,15.808823529411764 a107.5,15.808823529411764 0,0,0 215,0 a107.5,15.808823529411764 0,0,0 -215,0 l0,102.80882352941177 a107.5,15.808823529411764 0,0,0 215,0 l0,-102.80882352941177" class="basic label-container" style="" transform="translate(-107.5, -67.21323529411765)"/><g class="label" style="" transform="translate(-100, -26)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>usage-ledger.v1.jsonl</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-Summary-12" transform="translate(3214.5, 1041.6397018432617)"><path d="M0,15.808823529411764 a107.5,15.808823529411764 0,0,0 215,0 a107.5,15.808823529411764 0,0,0 -215,0 l0,102.80882352941177 a107.5,15.808823529411764 0,0,0 215,0 l0,-102.80882352941177" class="basic label-container" style="" transform="translate(-107.5, -67.21323529411765)"/><g class="label" style="" transform="translate(-100, -26)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>usage-summary.v1.json</p></span></div></foreignObject></g></g></g></g></g></svg>